<!doctype html>

<html class="no-js" lang="{{ request.locale.iso_code }}" dir="{% render 'direction' %}">
  <head>
    <script defer src="{{ 'rterms-patch.js' | asset_url }}"></script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, height=device-height, minimum-scale=1.0, maximum-scale=5.0">
    <!-- Open Graph / Social Media Preview -->
    <meta property="og:title" content="{{ page_title | default: shop.name }}" />
    <meta property="og:description" content="{{ page_description | default: shop.description | truncate: 160 }}" />
    <meta property="og:image" content="{{ 'main_banner_light.webp' | file_url }}" />
    <meta property="og:url" content="{{ canonical_url }}" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image" content="{{ 'IMG_7473.png' | file_url }}" />
    <!-- PAGE TITLES -->
    {% if template contains 'product' %}
        <!-- Product page title -->
        {% if product.metafields.custom.collection %}
          <title>{{ product.title | append: " | " | append: product.metafields.custom.collection | strip_html | escape }}</title>
        {% else %}
          <title>{{ product.title | append: " | " | append: shop.name | strip_html | escape }}</title>
        {% endif %}
  {% elsif template contains 'collection' %}
    <!-- Collection page title with fallback -->
    <title>
        {% if collection.title %}
            {{ collection.title | append: " | " | append: shop.name | strip_html | escape }}
        {% else %}
            Collections | {{ shop.name | escape }}
        {% endif %}
    </title>
    {% elsif template == 'index' %}
        <!-- Homepage title (no shop name) -->
        <title>{{ page_title | strip_html | escape }}</title>
    {% else %}
        <!-- Other pages title -->
        <title>
            {{ page_title | append: " | " | append: shop.name | escape }}
            {% if current_page != 1 %}
                &ndash; {{ 'general.page' | t: page: current_page }}
            {% endif %}
        </title>
    {% endif %}
    <!-- META DESCRIPTION -->
 {% if template contains 'product' %}
    <!-- Product meta description -->
    {% if product.metafields.custom.collection %}
      <meta name="description" content="Upgrade your space with the {{ product.title }} from our {{ product.metafields.custom.collection }} collection. High quality and premium delivery across the USA.">
    {% else %}
      <meta name="description" content="Upgrade your space with the {{ product.title }} by {{ shop.name }}. High quality and premium delivery across the USA.">
    {% endif %}
  
{% elsif template contains 'collection' %}
    <!-- Collection meta description -->
    <meta name="description" content="Designed for elegance, crafted for durability: {{ shop.name }} offers both custom and in-stock {{ collection.title }}, plus more. Shop now!">
    
{% else %}
    <!-- Meta description for other pages -->
    {%- if page_description -%}
        <meta name="description" content="{{ page_description | escape }}">
    {%- endif -%}
{% endif %}
  
    <link rel="canonical" href="{{ canonical_url }}">

    {%- if settings.favicon -%}
      <link rel="shortcut icon" href="{{ settings.favicon | image_url: width: 96 }}">
      <link rel="apple-touch-icon" href="{{ settings.favicon | image_url: width: 180 }}">
    {%- endif -%}

    {%- comment -%}Few prefetch to increase performance on commonly used third-parties{%- endcomment -%}
    <link rel="preconnect" href="https://fonts.shopifycdn.com" crossorigin>

    
    {%- unless settings.heading_font.system? -%}
      <link rel="preload" href="{{ settings.heading_font | font_url }}" as="font" type="font/woff2" crossorigin>
    {%- endunless -%}

    {%- unless settings.text_font.system? -%}
      <link rel="preload" href="{{ settings.text_font | font_url }}" as="font" type="font/woff2" crossorigin>
    {%- endunless -%}

    {%- render 'social-meta-tags' -%}
    {%- render 'microdata-schema' -%}
    {%- render 'css-variables' -%}
    {%- render 'js-variables' -%}


    {%- if request.page_type == 'gift_card' -%}
      <script src="{{ 'vendor/qrcode.js' | shopify_asset_url }}" defer></script>
    {%- endif -%}


        <script>
    document.addEventListener("DOMContentLoaded", function () {
      const checkoutBtn = document.querySelector('button[name="checkout"]');
    
      if (checkoutBtn) {
        const originalAlert = window.alert;
        window.alert = function (msg) {
          if (msg.includes("By proceeding with this purchase")) {
            const checkbox = document.querySelector('input[type="checkbox"]');
            if (!checkbox) return;
    
            // вже є помилка?
            if (!document.querySelector('.rterms-error')) {
              const errorDiv = document.createElement('div');
              errorDiv.className = 'rterms-error';
              errorDiv.textContent = 'Please agree to the Terms & Conditions.';
    
              const block = checkbox.closest('.terms-relentless');
              if (block) {
                block.insertAdjacentElement('afterend', errorDiv); // ВСТАВЛЯЄМО ПІСЛЯ всього блоку
              }
            }
          } else {
            originalAlert(msg);
          }
        };
      }
    });
    </script>
    
    <script>
      if (!(HTMLScriptElement.supports && HTMLScriptElement.supports('importmap'))) {
        const importMapPolyfill = document.createElement('script');
        importMapPolyfill.async = true;
        importMapPolyfill.src = "{{ 'es-module-shims.min.js' | asset_url }}";

        document.head.appendChild(importMapPolyfill);
      }
    </script>

    <script type="importmap">
      {%- comment -%}On Safari 16.3 and lower, a polyfill is used to load importmap{%- endcomment -%}
      {
        "imports": {
          "vendor": "{{ 'vendor.min.js' | asset_url }}",
          "theme": "{{ 'theme.js' | asset_url }}",
          "photoswipe": "{{ 'photoswipe.min.js' | asset_url }}"
        }
      }
    </script>
  


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css">
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js" defer></script>
    
    <script type="module" src="{{ 'vendor.min.js' | asset_url }}"></script>
    <script type="module" src="{{ 'theme.js' | asset_url }}"></script>

    {{ content_for_header }}

    {{- 'theme.css' | asset_url | stylesheet_tag: preload: true -}}

    <!-- <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "AlpadaDoors",
        "url": "https://alpadadoors.com",
        "logo": "https://alpadadoors.com/path-to-your-logo.png"
      }
    </script> -->
    
  
  {% include "huk-mega-menu-pro" %}
  {% unless template.name == 'product' %}
    <style>
      [data-easify-root] { display:none!important; }
    </style>
  {% endunless %}
  
  {% comment %} <!-- Favicon setup -->
  <link rel="icon" href="https://cdn.shopify.com/s/files/1/0633/0558/0744/files/favicon.ico?v=1759446026" type="image/x-icon" sizes="any">
  <link rel="icon" type="image/png" sizes="180x180" href="https://cdn.shopify.com/s/files/1/0633/0558/0744/files/favicon-180x180.png?v=1759444216">
  <link rel="apple-touch-icon" sizes="180x180" href="https://cdn.shopify.com/s/files/1/0633/0558/0744/files/favicon-180x180.png?v=1759444216">
  <link rel="icon" type="image/png" sizes="512x512" href="https://cdn.shopify.com/s/files/1/0633/0558/0744/files/favicon-512x512_e5311135-6dfe-42a7-85a3-0037ac53816b.png?v=1759444112">
  </head> {% endcomment %}

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="16x16" href="{{ 'favicon-16x16.png' | asset_url }}">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ 'favicon-32x32.png' | asset_url }}">
  <link rel="apple-touch-icon" sizes="180x180" href="{{ 'favicon-180x180.png' | asset_url }}">
  <link rel="icon" sizes="any" href="{{ 'favicon.ico' | asset_url }}">
  <link rel="manifest" href="{{ 'site.webmanifest' | asset_url }}">
  {% comment %} TEST TEST {% endcomment %}

  </head>

  {% liquid
    assign features_class = ''

    if settings.show_button_transition
      assign features_class = features_class | append: 'features--button-transition '
    endif

    if settings.show_image_zoom_on_hover
      assign features_class = features_class | append: 'features--zoom-image '
    endif

    if settings.show_page_transition
      assign features_class = features_class | append: 'features--page-transition '
    endif
  %}
  
  <body class="{{ features_class }} color-scheme color-scheme--{{ settings.default_color_scheme.id }}">
    {%- render 'shadow-dom-templates' -%}

    <loading-bar class="loading-bar" aria-hidden="true"></loading-bar>
    <a href="#main" allow-hash-change class="skip-to-content sr-only">{{ 'general.accessibility.skip_to_content' | t }}</a>

    <span id="header-scroll-tracker" style="position: absolute; width: 1px; height: 1px; top: var(--header-scroll-tracker-offset, 10px); left: 0;">
      {%- comment -%}
        This allows our theme to track when the user has scrolled a given amount of pixels, without relying on a global scroll listener. This helps
        to improve performance and reduce reflows.
      {%- endcomment -%}
    </span>

    {%- if request.page_type != 'password' -%}
      {%- sections 'header-group' -%}
      {%- sections 'overlay-group' -%}
    {%- endif -%}
    
    <main id="main" class="anchor">
      {{ content_for_layout }}

      {%- comment -%}
      IMPLEMENTATION NOTE: For best semantics, having the footer group outside the main would be slightly better, but
        moving it inside the main allows to have all the sections (including sections inside the footer group) to be
        consecutive, and hence having a cleaner margin collapsing management.
      {%- endcomment -%}
      {%- if request.page_type != 'password' -%}
        {%- sections 'footer-group' -%}
      {%- endif -%}
    </main>
    <!-- Select2 start -->
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        document.querySelectorAll('.variant-search-input').forEach(function (searchInput) {
          const listbox = searchInput.closest('x-listbox');
          const buttons = listbox.querySelectorAll('.variant-option-button');
          const noResults = listbox.querySelector('.variant-no-results');
    
          // Hide search input if there are 10 or fewer options
          if (buttons.length <= 10) {
            searchInput.classList.add('hidden');
            return; // Skip adding the input handler
          }
    
          // Add input filtering
          searchInput.addEventListener('input', function () {
            const searchTerm = this.value.toLowerCase();
            let visibleCount = 0;
    
            buttons.forEach(button => {
              const text = button.textContent.trim().toLowerCase();
              if (text.includes(searchTerm)) {
                button.style.display = '';
                visibleCount++;
              } else {
                button.style.display = 'none';
              }
            });
    
            // Toggle "no results" message
            if (noResults) {
              noResults.style.display = visibleCount === 0 ? 'block' : 'none';
            }
          });
        });
      });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const container = document.querySelector('.product-info__block-item[data-block-type="@app"]');
    
        if (!container) return;
    
        const observer = new MutationObserver(() => {
          if (container.querySelector('.easify-product-options')) {
            const placeholder = container.querySelector('.easify-placeholder');
            if (placeholder) placeholder.remove();
            observer.disconnect();
          }
        });
    
        observer.observe(container, { childList: true, subtree: true });
      });
    </script>
    

  {% render 'size-guide-modal', page_handle: 'size-guide', id: 'size-guide' %}
  {% render 'size-guide-modal', page_handle: 'size-guide-barn-doors', id: 'size-guide-barn-doors' %}
  {% render 'size-guide-modal', page_handle: 'size-guide-arched-doors', id: 'size-guide-arched-doors' %}



  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const qtyInput = document.querySelector('input[name="quantity"]');
      const priceEl = document.querySelector('[data-product-price]');
      const subtotalPrice = document.getElementById('subtotal-price');

      if(qtyInput && priceEl){
        const basePrice = parseFloat(priceEl.getAttribute("data-product-price"));

        function updateSubtotal(){
          const qty = parseInt(qtyInput.value) || 1;
          subtotalPrice.textContent = Shopify.formatMoney(basePrice * qty);
        }

        qtyInput.addEventListener('change', updateSubtotal);
        updateSubtotal();
      }
    });
  </script>
  </body>
</html>